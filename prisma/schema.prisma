generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Baby {
  id                     String         @id @default(cuid())
  name                   String
  birthDate              DateTime
  birthTime              String?
  gender                 String
  avatar                 String?
  birthWeight            Float?
  birthHeight            Float?
  birthHeadCircumference Float?
  bloodType              String?
  allergies              String?
  notes                  String?
  createdAt              DateTime       @default(now())
  updatedAt              DateTime       @updatedAt
  growthRecords          GrowthRecord[]
  mediaItems             MediaItem[]
  milestones             Milestone[]

  @@map("babies")
}

model GrowthRecord {
  id                String   @id @default(cuid())
  babyId            String
  date              DateTime
  weight            Float?
  height            Float?
  headCircumference Float?
  notes             String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  baby              Baby     @relation(fields: [babyId], references: [id], onDelete: Cascade)

  @@index([babyId, date])
  @@map("growth_records")
}

model Milestone {
  id          String   @id @default(cuid())
  babyId      String
  date        DateTime
  title       String
  description String?
  tags        String[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  baby        Baby     @relation(fields: [babyId], references: [id], onDelete: Cascade)

  @@index([babyId, date])
  @@map("milestones")
}

model MediaItem {
  id           String   @id @default(cuid())
  babyId       String
  date         DateTime
  title        String
  description  String?
  url          String
  mediaType    String
  format       String?
  thumbnailUrl String?
  duration     Int?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  baby         Baby     @relation(fields: [babyId], references: [id], onDelete: Cascade)

  @@index([babyId, date])
  @@map("media_items")
}
